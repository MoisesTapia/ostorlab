{

    "CustomTypes": {
        "ArrayOfStrings": {
            "type": "array",
            "items": {
                "type": "string",
                "maxLength": 4096
            }
        }      
    },
    
    "properties": {
        "name": {
            "type": "string",
            "maxLength": 2048
        },
        
	    "version": {
            "type": "string",
            "pattern": "^(\\d+\\.)?(\\d+\\.)?(\\d+)$", 
            "maxLength": 512
        },
        
        "description":{
            "type": "string"
        },

        "image":{
            "type": "string",
            "pattern": "((?:[^/]*/)*)(.*)"
        },

        "source":{
            "type": "string",
            "format": "uri",
            "pattern": "^https?://",
            "maxLength": 4096
        },

        "license":{
            "type": "string",
            "maxLength": 1024
        },

        "durability":{
            "type": "string",
            "maxLength": 1024, 
            "enum": ["temporary", "development", "published"]
        },

        "restrictions": {
            "$ref": "#/CustomTypes/ArrayOfStrings"
        },

        "in_selectors":{
            "$ref": "#/CustomTypes/ArrayOfStrings"
        },

        "out_selectors":{
            "$ref": "#/CustomTypes/ArrayOfStrings"
        },

        "restart_policy":{
            "type": "string",
            "maxLength": 1024,
            "enum": ["run_once", "always_restart"]
        },

        "constraints":{ 
            "$ref": "#/CustomTypes/ArrayOfStrings"
        },

        "mounts":{
            "$ref": "#/CustomTypes/ArrayOfStrings"
        },

        "mem_limit":{ 
            "type": "number"
        }, 
        
        "portmap":{
            "type": "object",
            "properties": {
                "port_src": { "type": "number" },  
                "port_dst": { "type": "number" }
            }
        }, 

        "agenArgument":{
            "type": "object",
            "properties": {
                "name": {
                    "type": "string",
                    "maxLength": 2048
                },
                "type": {
                    "type": "string",
                    "maxLength": 2048
                },
                "description": { "type": "string" },
                "default_value": {
                    "type": "string",
                    "contentEncoding": "base64"
                }

            }       
        }
    },

    "required": ["name", "description", "in_selectors", "out_selectors"]
}
